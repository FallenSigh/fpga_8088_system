Microsoft (R) Macro Assembler Version 6.14.8444		    12/18/25 10:56:51
stack.asm						     Page 1 - 1


				.model tiny
 0000				        .code
				        .8086

 = FC00				        ROM_SEGMENT EQU 0FC00h
				        ; ROM: 0xFC000-0xFFFFF
				        ; RAM: 0x00000-0x03FFF
				        org     0h

 0000				IR0_ISR PROC FAR
 0000  50			        PUSH AX
 0001  52			        PUSH DX

 0002  B0 01			        MOV AL, 01H
 0004  E6 80			        OUT  80H, AL

				        ; ===============================
				        ; 2. 发送 EOI（必须）
				        ; ===============================
 0006  B0 20			        MOV  AL, 20H             ; Non-specific EOI
 0008  E6 20			        OUT  20H, AL             ; 写 8259 命令端口

				        ; ===============================
				        ; 3. 恢复现场并返回
				        ; ===============================
 000A  5A			        POP  DX
 000B  58			        POP  AX
 000C  CF			        IRET
 000D				    IR0_ISR ENDP

 000D				start:
 000D  FA			        cli                     ; 初始化期间关闭中断

 000E  B8 0000			        mov     ax, 0000h
 0011  8E D8			        mov     ds, ax
 0013  8E C0			        mov     es, ax
 0015  8E D0			        mov     ss, ax

 0017  BC 4000			        mov     sp, 04000h      ; SP 指向 0x0000:0x4000 (RAM 顶端)

 001A  BB 0064			        mov bx, 100
 001D  53			        push bx
 001E  BB 012C			        mov bx, 300
 0021  53			        push bx
 0022  53			        push bx
 0023  5B			        pop bx

 0024				stop_here:
 0024  EB FE			        jmp     stop_here

				        ; --- GW8088 BOOT CODE (Reset Vector) ---
				        org     03ff0h

 3FF0  EA			        db      0EAh
 3FF1  000D R			        dw      offset start
 3FF3  FC00			        dw      ROM_SEGMENT

				        org     03fffh
 3FFF  00			        db      0

				        end
Microsoft (R) Macro Assembler Version 6.14.8444		    12/18/25 10:56:51
stack.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

DGROUP . . . . . . . . . . . . .	GROUP
_TEXT  . . . . . . . . . . . . .	16 Bit	 4000	  Word	  Public  'CODE'	
_DATA  . . . . . . . . . . . . .	16 Bit	 0000	  Word	  Public  'DATA'	


Procedures,  parameters and locals:

                N a m e                 Type     Value    Attr

IR0_ISR  . . . . . . . . . . . .	P Far	 0000	  _TEXT	Length= 000D Public


Symbols:

                N a m e                 Type     Value    Attr

@CodeSize  . . . . . . . . . . .	Number	 0000h	 
@DataSize  . . . . . . . . . . .	Number	 0000h	 
@Interface . . . . . . . . . . .	Number	 0000h	 
@Model . . . . . . . . . . . . .	Number	 0001h	 
@code  . . . . . . . . . . . . .	Text   	 DGROUP
@data  . . . . . . . . . . . . .	Text   	 DGROUP
@fardata?  . . . . . . . . . . .	Text   	 FAR_BSS
@fardata . . . . . . . . . . . .	Text   	 FAR_DATA
@stack . . . . . . . . . . . . .	Text   	 DGROUP
ROM_SEGMENT  . . . . . . . . . .	Number	 FC00h	 
start  . . . . . . . . . . . . .	L Near	 000D	  _TEXT	
stop_here  . . . . . . . . . . .	L Near	 0024	  _TEXT	

	   0 Warnings
	   0 Errors
